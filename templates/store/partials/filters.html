<div id="filters" {% if oob %}hx-swap-oob="true"{% endif %} class="mb-6 flex items-center justify-between gap-4">
  <div class="flex flex-wrap gap-2">
    <input type="hidden" name="category" value="{{ category }}" />
    <input type="hidden" name="q" value="{{ q }}" />
    {% for key, label in categories %}
      <a href="/?{% if key %}category={{ key }}{% endif %}{% if sort %}{% if key %}&{% endif %}sort={{ sort }}{% endif %}{% if q %}{% if sort or key %}&{% endif %}q={{ q }}{% endif %}"
         hx-get="/?{% if key %}category={{ key }}{% endif %}{% if sort %}{% if key %}&{% endif %}sort={{ sort }}{% endif %}{% if q %}{% if sort or key %}&{% endif %}q={{ q }}{% endif %}"
         hx-target="#grid" hx-push-url="true"
         class="inline-flex items-center rounded-full border px-3 py-1 text-sm transition {% if category == key %}bg-blue-50 text-blue-700 border-blue-200{% else %}border-slate-300 hover:bg-slate-100{% endif %}">
        {{ label }}
      </a>
    {% endfor %}
  </div>
  <div class="ml-auto">
    <label class="mr-2 text-sm text-slate-600">Sort</label>
    <select name="sort" class="rounded-md bg-white border border-slate-300 px-3 py-2 text-sm text-slate-900"
            hx-get="/" hx-trigger="change" hx-target="#grid" hx-include="#filters" hx-push-url="true">
      <option value="" {% if not sort %}selected{% endif %}>Featured</option>
      <option value="price-asc" {% if sort == 'price-asc' %}selected{% endif %}>Price: Low to High</option>
      <option value="price-desc" {% if sort == 'price-desc' %}selected{% endif %}>Price: High to Low</option>
    </select>
  </div>
</div>
