{% load static %}
<!DOCTYPE html>
<html lang="en" class="h-full">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Cheappcgames{% endblock %}</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            brand: {
              600: '#2563eb',
              700: '#1d4ed8',
            }
          }
        }
      }
    }
  </script>
  <script src="https://unpkg.com/htmx.org@1.9.12"></script>
  {% block head %}{% endblock %}
  <style>
    html, body { background-color: #f8fafc; }
    /* Hide native number input spinners; keep our +/- controls */
    input[type="number"].no-spin::-webkit-outer-spin-button,
    input[type="number"].no-spin::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    input[type="number"].no-spin { -moz-appearance: textfield; }
  </style>
</head>
<body class="min-h-screen flex flex-col text-slate-800">
  <header class="border-b border-slate-200 bg-white sticky top-0 z-40">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex items-center justify-between h-16">
        <a href="/" class="flex items-center gap-2 font-semibold tracking-tight text-slate-900">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 text-brand-600"><path d="M10.5 1.5a.75.75 0 01.75.75V3h1.5V2.25a.75.75 0 011.5 0V3h2.25A2.25 2.25 0 0119.5 5.25v13.5A2.25 2.25 0 0117.25 21H6.75A2.25 2.25 0 014.5 18.75V5.25A2.25 2.25 0 016.75 3H9V2.25a.75.75 0 01.75-.75z"/><path d="M8.25 7.5A.75.75 0 019 6.75h6a.75.75 0 010 1.5H9a.75.75 0 01-.75-.75zM8.25 10.5A.75.75 0 019 9.75h6a.75.75 0 010 1.5H9a.75.75 0 01-.75-.75zM9 12.75a.75.75 0 000 1.5h3a.75.75 0 000-1.5H9z"/></svg>
          <span class="text-lg">Cheappcgames</span>
        </a>

        <form action="/" method="get" class="hidden md:flex items-center gap-2 flex-1 max-w-xl mx-8">
          <input type="text" name="q" value="{{ q }}" placeholder="Search games..." class="w-full rounded-md bg-white border border-slate-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-brand-600 text-slate-900 placeholder-slate-400" />
          <button class="inline-flex items-center gap-1 rounded-md bg-brand-600 hover:bg-brand-700 text-white px-3 py-2 text-sm font-medium">Search</button>
        </form>

        <a href="{% url 'cart' %}" class="relative inline-flex items-center gap-2 text-slate-700 hover:text-slate-900">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 00-3 3h12.75m-9.75-3h9.384c1.121-2.3 2.24-4.611 3.36-6.916a1.125 1.125 0 00-1.011-1.584H6.374M7.5 14.25L5.106 5.272M6 20.25a.75.75 0 11-1.5 0 .75.75 0 011.5 0zm12.75 0a.75.75 0 11-1.5 0 .75.75 0 011.5 0z" />
          </svg>
          <span class="text-sm">Cart</span>
          {% include 'store/partials/cart_count.html' with items=None %}
        </a>
      </div>
    </div>
  </header>

  <main class="flex-1">
    {% block content %}{% endblock %}
  </main>

  <footer class="border-t border-slate-200 bg-white mt-10">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 flex flex-col sm:flex-row items-center justify-between gap-4">
      <div class="text-sm text-slate-600">Â© {% now "Y" %} Cheappcgames. All rights reserved.</div>
      <div class="flex items-center gap-4">
        <a href="https://www.facebook.com/profile.php?id=61565348997990" target="_blank" rel="noopener" aria-label="Cheappcgames on Facebook"
           class="inline-flex items-center gap-2 text-slate-600 hover:text-slate-900">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5"><path d="M13.5 9H15V6h-1.5a3.75 3.75 0 00-3.75 3.75V12H7.5v3h2.25v6h3v-6h2.103L15.5 12h-2.75V9.75c0-.414.336-.75.75-.75z"/></svg>
          <span class="text-sm">Facebook</span>
        </a>
        <a href="https://www.instagram.com/cheappcgames.pk/" target="_blank" rel="noopener" aria-label="Cheappcgames on Instagram"
           class="inline-flex items-center gap-2 text-slate-600 hover:text-slate-900">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-5 h-5"><path d="M7 2.25A4.75 4.75 0 002.25 7v10A4.75 4.75 0 007 21.75h10A4.75 4.75 0 0021.75 17V7A4.75 4.75 0 0017 2.25H7zm0 1.5h10A3.25 3.25 0 0120.25 7v10A3.25 3.25 0 0117 20.25H7A3.25 3.25 0 013.75 17V7A3.25 3.25 0 017 3.75zm5 3a5.25 5.25 0 100 10.5A5.25 5.25 0 0012 6.75zm0 1.5a3.75 3.75 0 110 7.5 3.75 3.75 0 010-7.5zm5.25.375a.875.875 0 11-1.75 0 .875.875 0 011.75 0z"/></svg>
          <span class="text-sm">Instagram</span>
        </a>
      </div>
    </div>
  </footer>

  <script>
    // CSRF setup for HTMX
    function getCookie(name) {
      let cookieValue = null;
      if (document.cookie && document.cookie !== '') {
        const cookies = document.cookie.split(';');
        for (let i = 0; i < cookies.length; i++) {
          const cookie = cookies[i].trim();
          if (cookie.substring(0, name.length + 1) === (name + '=')) {
            cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
            break;
          }
        }
      }
      return cookieValue;
    }
    document.body.addEventListener('htmx:configRequest', (evt) => {
      evt.detail.headers['X-CSRFToken'] = getCookie('csrftoken');
    });
  </script>
  {% block scripts %}{% endblock %}
</body>
</html>
